{"version":3,"sources":["webpack:///./node_modules/@magento/peregrine/lib/talons/CartPage/GiftCards/giftCardQueries.gql.ee.js","webpack:///./node_modules/@magento/peregrine/lib/talons/CartPage/GiftCards/useGiftCards.js","webpack:///./node_modules/@magento/peregrine/lib/Price/price.js","webpack:///./node_modules/@magento/venia-ui/lib/components/CartPage/GiftCards/giftCards.module.css?57dc","webpack:///./node_modules/@magento/peregrine/lib/talons/CartPage/GiftCards/useGiftCard.js","webpack:///./node_modules/@magento/venia-ui/lib/components/CartPage/GiftCards/giftCard.module.css?0b6d","webpack:///./node_modules/@magento/venia-ui/lib/components/CartPage/GiftCards/giftCard.js","webpack:///./node_modules/@magento/venia-ui/lib/components/CartPage/GiftCards/giftCards.js","webpack:///./node_modules/@magento/venia-ui/lib/components/LinkButton/linkButton.module.css?e775","webpack:///./node_modules/@magento/venia-ui/lib/components/LinkButton/linkButton.js","webpack:///./node_modules/@magento/venia-ui/lib/components/CartPage/GiftCards/giftCard.module.css","webpack:///./node_modules/@magento/venia-ui/lib/components/CartPage/GiftCards/giftCards.module.css","webpack:///./node_modules/@magento/venia-ui/lib/components/LinkButton/linkButton.module.css","webpack:///./node_modules/@magento/venia-ui/lib/components/clickable.module.css"],"names":["GET_APPLIED_GIFT_CARDS_QUERY","gql","GiftCardFragment","GET_GIFT_CARD_BALANCE_QUERY","APPLY_GIFT_CARD_MUTATION","CartPageFragment","REMOVE_GIFT_CARD_MUTATION","getAppliedGiftCardsQuery","getGiftCardBalanceQuery","applyGiftCardMutation","removeGiftCardMutation","actions","APPLY","CHECK_BALANCE","REMOVE","useGiftCards","props","operations","mergeOperations","DEFAULT_OPERATIONS","setIsCartUpdating","cartId","useCartContext","formApi","useFormApi","appliedCardsResult","useQuery","fetchPolicy","nextFetchPolicy","skip","variables","checkCardBalance","balanceResult","useLazyQuery","applyCard","applyCardResult","useMutation","removeCard","removeCardResult","mostRecentAction","setMostRecentAction","useState","applyGiftCard","useCallback","giftCardCode","getValue","reset","checkGiftCardBalance","removeGiftCard","err","called","applyCardCalled","loading","applyCardLoading","removeCardCalled","removeCardLoading","useEffect","shouldDisplayCardBalance","Boolean","data","shouldDisplayCardError","error","checkBalanceData","giftCardAccount","errorLoadingGiftCards","errorRemovingCard","giftCardsData","cart","applied_gift_cards","isLoadingGiftCards","isApplyingCard","isCheckingBalance","isRemovingCard","Price","locale","useIntl","value","currencyCode","classes","parts","patches","toParts","call","Intl","NumberFormat","style","currency","children","map","part","i","partClass","type","key","React","createElement","className","Fragment","propTypes","shape","string","integer","decimal","fraction","number","isRequired","defaultProps","useGiftCard","code","removeGiftCardWithCode","GiftCard","currentBalance","useStyle","defaultClasses","card_info","balance","FormattedMessage","id","defaultMessage","LinkButton","disabled","onClick","errorIcon","Icon","src","AlertCircleIcon","attrs","width","GiftCards","talonProps","formatMessage","addToast","useToasts","icon","message","dismissable","timeout","LoadingIndicator","cardEntryErrorMessage","appliedGiftCards","errorText","length","cardList","giftCardData","current_balance","cards_container","cardBalance","price","containerClass","card_input_container_error","card_input_container","cardEntryContents","card","Field","root","entry","label","TextInput","field","mask","trim","maskOnBlur","placeholder","validate","applyLabel","Button","priority","check_balance_button","entryForm","Form","propClasses","restProps","_objectWithoutProperties","_excluded","_extends","root_normalPriority","oneOf"],"mappings":"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","file":"4.js","sourcesContent":["import { gql } from '@apollo/client';\n\nimport { CartPageFragment } from '../cartPageFragments.gql';\nimport { GiftCardFragment } from './giftCardFragments.gql';\n\nconst GET_APPLIED_GIFT_CARDS_QUERY = gql`\n    query getAppliedGiftCards($cartId: String!) {\n        cart(cart_id: $cartId) {\n            id\n            ...GiftCardFragment\n        }\n    }\n    ${GiftCardFragment}\n`;\n\nconst GET_GIFT_CARD_BALANCE_QUERY = gql`\n    query getGiftCardBalance($giftCardCode: String!) {\n        giftCardAccount(input: { gift_card_code: $giftCardCode }) {\n            balance {\n                currency\n                value\n            }\n            code\n            expiration_date\n            id: code\n        }\n    }\n`;\n\nconst APPLY_GIFT_CARD_MUTATION = gql`\n    mutation applyGiftCardToCart($cartId: String!, $giftCardCode: String!) {\n        applyGiftCardToCart(\n            input: { cart_id: $cartId, gift_card_code: $giftCardCode }\n        ) {\n            cart {\n                id\n                ...CartPageFragment\n                # If this mutation causes \"free\" to become available we need to know.\n                available_payment_methods {\n                    code\n                    title\n                }\n            }\n        }\n    }\n    ${CartPageFragment}\n`;\n\nconst REMOVE_GIFT_CARD_MUTATION = gql`\n    mutation removeGiftCard($cartId: String!, $giftCardCode: String!) {\n        removeGiftCardFromCart(\n            input: { cart_id: $cartId, gift_card_code: $giftCardCode }\n        ) {\n            cart {\n                id\n                ...CartPageFragment\n                # If this mutation causes \"free\" to become available we need to know.\n                available_payment_methods {\n                    code\n                    title\n                }\n            }\n        }\n    }\n    ${CartPageFragment}\n`;\n\nexport default {\n    getAppliedGiftCardsQuery: GET_APPLIED_GIFT_CARDS_QUERY,\n    getGiftCardBalanceQuery: GET_GIFT_CARD_BALANCE_QUERY,\n    applyGiftCardMutation: APPLY_GIFT_CARD_MUTATION,\n    removeGiftCardMutation: REMOVE_GIFT_CARD_MUTATION\n};\n","import { useCallback, useEffect, useState } from 'react';\nimport { useFormApi } from 'informed';\nimport { useLazyQuery, useMutation, useQuery } from '@apollo/client';\n\nimport { useCartContext } from '@magento/peregrine/lib/context/cart';\nimport mergeOperations from '@magento/peregrine/lib/util/shallowMerge';\nimport DEFAULT_OPERATIONS from './giftCardQueries.gql';\n\n// To keep track of the most recent action taken.\nconst actions = {\n    APPLY: 'apply',\n    CHECK_BALANCE: 'check',\n    REMOVE: 'remove'\n};\n\n/**\n * Handles the logic for a component that renders a list of gift cards.\n * It performs effects and returns the prop data necessary for rendering\n * the component.\n *\n * This talon performs the following effects:\n *\n * - Fetch the currently applied gift cards for a cart\n * - Manage the updating state of the cart while a gift card is being applied or removed\n *\n * @function\n *\n * @param {Object} props\n * @param {function} props.setIsCartUpdating Callback function for setting the update state for the cart.\n * @param {GiftCardsMutations} props.mutations GraphQL mutations for Gift Cards\n * @param {GiftCardsQueries} props.queries GraphQL queries for Gift Cards\n *\n * @returns {GiftCardsTalonProps}\n *\n * @example <caption>Importing into your project</caption>\n * import { useGiftCards } from '@magento/peregrine/lib/talons/CartPage/GiftCards'\n */\nexport const useGiftCards = props => {\n    const operations = mergeOperations(DEFAULT_OPERATIONS, props.operations);\n    const {\n        getAppliedGiftCardsQuery,\n        getGiftCardBalanceQuery,\n        applyGiftCardMutation,\n        removeGiftCardMutation\n    } = operations;\n\n    const { setIsCartUpdating } = props;\n\n    // We need the cartId for all of our queries and mutations.\n    const [{ cartId }] = useCartContext();\n\n    const formApi = useFormApi();\n\n    /*\n     * Apollo hooks.\n     *\n     * Immediately execute the cart query and set up the other graphql actions.\n     */\n    const appliedCardsResult = useQuery(getAppliedGiftCardsQuery, {\n        fetchPolicy: 'cache-and-network',\n        nextFetchPolicy: 'cache-first',\n        skip: !cartId,\n        variables: { cartId }\n    });\n\n    const [checkCardBalance, balanceResult] = useLazyQuery(\n        getGiftCardBalanceQuery,\n        {\n            // For security, always fetch this from the network and never cache the\n            // result.\n            fetchPolicy: 'no-cache'\n        }\n    );\n\n    const [applyCard, applyCardResult] = useMutation(applyGiftCardMutation);\n    const [removeCard, removeCardResult] = useMutation(removeGiftCardMutation);\n\n    /*\n     *  useState hooks.\n     */\n    const [mostRecentAction, setMostRecentAction] = useState(null);\n\n    /*\n     * useCallback hooks.\n     */\n    const applyGiftCard = useCallback(async () => {\n        setMostRecentAction(actions.APPLY);\n\n        const giftCardCode = formApi.getValue('card');\n\n        await applyCard({\n            variables: {\n                cartId,\n                giftCardCode\n            }\n        });\n\n        // Clear the input form after successful apply.\n        formApi.reset();\n    }, [formApi, applyCard, cartId]);\n\n    const checkGiftCardBalance = useCallback(() => {\n        setMostRecentAction(actions.CHECK_BALANCE);\n\n        const giftCardCode = formApi.getValue('card');\n\n        checkCardBalance({\n            variables: { giftCardCode }\n        });\n    }, [formApi, checkCardBalance]);\n\n    const removeGiftCard = useCallback(\n        async giftCardCode => {\n            setMostRecentAction(actions.REMOVE);\n\n            try {\n                await removeCard({\n                    variables: {\n                        cartId,\n                        giftCardCode\n                    }\n                });\n            } catch (err) {\n                // do nothing\n            }\n        },\n        [cartId, removeCard]\n    );\n\n    const {\n        called: applyCardCalled,\n        loading: applyCardLoading\n    } = applyCardResult;\n    const {\n        called: removeCardCalled,\n        loading: removeCardLoading\n    } = removeCardResult;\n\n    useEffect(() => {\n        if (applyCardCalled || removeCardCalled) {\n            // If a gift card mutation is in flight, tell the cart.\n            setIsCartUpdating(applyCardLoading || removeCardLoading);\n        }\n    }, [\n        applyCardCalled,\n        applyCardLoading,\n        removeCardCalled,\n        removeCardLoading,\n        setIsCartUpdating\n    ]);\n\n    const shouldDisplayCardBalance =\n        mostRecentAction === actions.CHECK_BALANCE &&\n        Boolean(balanceResult.data);\n\n    // We should only display the last card error if the most recent action was apply or check and they had an error\n    const shouldDisplayCardError =\n        (mostRecentAction === actions.APPLY && applyCardResult.error) ||\n        (mostRecentAction === actions.CHECK_BALANCE && balanceResult.error);\n\n    return {\n        applyGiftCard,\n        checkBalanceData:\n            balanceResult.data && balanceResult.data.giftCardAccount,\n        checkGiftCardBalance,\n        errorLoadingGiftCards: Boolean(appliedCardsResult.error),\n        errorRemovingCard: Boolean(removeCardResult.error),\n        giftCardsData:\n            (appliedCardsResult.data &&\n                appliedCardsResult.data.cart.applied_gift_cards) ||\n            [],\n        isLoadingGiftCards: appliedCardsResult.loading,\n        isApplyingCard: applyCardLoading,\n        isCheckingBalance: balanceResult.loading,\n        isRemovingCard: removeCardLoading,\n        removeGiftCard,\n        shouldDisplayCardBalance,\n        shouldDisplayCardError\n    };\n};\n\n/** JSDoc type definitions */\n\n/**\n * GraphQL mutations for Gift Cards.\n *\n * @typedef {Object} GiftCardsMutations\n *\n * @property {GraphQLAST} applyGiftCardMutation The mutation used to apply a gift card to the cart.\n * @property {GraphQLAST} removeGiftCardMutation The mutation used to remove a gift card from the cart.\n *\n * @see [`giftCardQueries.ee.js`]{@link https://github.com/magento/pwa-studio/blob/develop/packages/peregrine/lib/talons/CartPage/GiftCards/giftCardQueries.gql.ee.js}\n * for queries used in Venia\n */\n\n/**\n * GraphQL queries for Gift Cards.\n *\n * @typedef {Object} GiftCardsQueries\n *\n * @property {GraphQLAST} getAppliedGiftCardsQuery The query used to get the gift cards currently applied to the cart.\n * @property {GraphQLAST} getGiftCardBalanceQuery The query used to get the gift cards currently applied to the cart.\n *\n * @see [`giftCardQueries.ee.js`]{@link https://github.com/magento/pwa-studio/blob/develop/packages/peregrine/lib/talons/CartPage/GiftCards/giftCardQueries.gql.ee.js}\n * for queries used in Venia\n */\n\n/**\n * Props data to use when rendering a list of gift cards.\n *\n * @typedef {Object} GiftCardsTalonProps\n *\n * @property {function}  applyGiftCard - A callback to apply a gift card to the cart.\n * @property {Object}    checkBalanceData - The giftCardAccount object of the most recent successful check balance GraphQL query.\n * @property {function}  checkGiftCardBalance - A callback to check the balance of a gift card.\n * @property {boolean}   errorLoadingGiftCards - Whether there was an error loading the cart's gift cards.\n * @property {boolean}   errorApplyingCard - Whether there was an error applying the gift card.\n * @property {boolean}   errorCheckingBalance - Whether there was an error checking the balance of the gift card.\n * @property {boolean}   errorRemovingCard - Whether there was an error removing the gift card.\n * @property {Array}     giftCardsData - The applied_gift_cards object of the cart query.\n * @property {boolean}   isLoadingGiftCards - Whether the cart's gift card data is loading.\n * @property {boolean}   isApplyingCard - Whether the apply gift card operation is in progress.\n * @property {boolean}   isCheckingBalance - Whether the check gift card balance operation is in progress.\n * @property {boolean}   isRemovingCard - Whether the remove gift card operation is in progress.\n * @property {function}  removeGiftCard - A callback to remove a gift card from the cart.\n * @property {boolean}   shouldDisplayCardBalance - Whether to display the gift card balance to the user\n * @property {boolean}   shouldDisplayCardError - Whether to display an error message under the card input field.\n */\n","import React, { Fragment } from 'react';\nimport { number, string, shape } from 'prop-types';\nimport patches from '../util/intlPatches';\nimport { useIntl } from 'react-intl';\n\n/**\n * @deprecated - replaced by to @magento/venia-ui/lib/components/Price\n *\n * The **Price** component is used anywhere a price needs to be displayed.\n *\n * Formatting of prices and currency symbol selection is handled entirely by the ECMAScript Internationalization API available in modern browsers.\n *\n * A [polyfill][] is required for any JavaScript runtime that does not have [Intl.NumberFormat.prototype.formatToParts][].\n *\n * [polyfill]: https://www.npmjs.com/package/intl\n * [Intl.NumberFormat.prototype.formatToParts]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/formatToParts\n */\nconst Price = props => {\n    const { locale } = useIntl();\n    const { value, currencyCode, classes } = props;\n\n    // If the optional locale prop is not provided or is undefined,\n    // the runtime's default locale is used in the Intl.NumberFormat() constructor.\n    const parts = patches.toParts.call(\n        new Intl.NumberFormat(locale, {\n            style: 'currency',\n            currency: currencyCode\n        }),\n        value\n    );\n\n    const children = parts.map((part, i) => {\n        const partClass = classes[part.type];\n        const key = `${i}-${part.value}`;\n\n        return (\n            <span key={key} className={partClass}>\n                {part.value}\n            </span>\n        );\n    });\n\n    return <Fragment>{children}</Fragment>;\n};\n\nPrice.propTypes = {\n    /**\n     * Class names to use when styling this component\n     */\n    classes: shape({\n        currency: string,\n        integer: string,\n        decimal: string,\n        fraction: string\n    }),\n    /**\n     * The numeric price\n     */\n    value: number.isRequired,\n    /**\n     * A string with any of the currency code supported by Intl.NumberFormat\n     */\n    currencyCode: string.isRequired\n};\n\nPrice.defaultProps = {\n    classes: {}\n};\n\nexport default Price;\n","import api from \"!../../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../../css-loader/dist/cjs.js??ref--6-oneOf-0-1!../../../../../../postcss-loader/dist/cjs.js!./giftCards.module.css\";\n\nvar options = {\"injectType\":\"styleTag\"};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { useCallback } from 'react';\n\n/**\n * Provide logic for a single gift card component.\n *\n * @function\n *\n * @param {Object} props\n * @param {String} props.code Gift card's code\n * @param {function} props.removeGiftCard A function that removes a gift card when provided a code\n *\n * @return {GiftCardTalonProps}\n *\n * @example <caption>Importing into your project</caption>\n * import { useGiftCard } from '@magento/peregrine/lib/talons/CartPage/GiftCards/useGiftCard';\n */\nexport const useGiftCard = props => {\n    const { code, removeGiftCard } = props;\n\n    const removeGiftCardWithCode = useCallback(() => {\n        removeGiftCard(code);\n    }, [code, removeGiftCard]);\n\n    return {\n        removeGiftCardWithCode\n    };\n};\n\n/** JSDoc type definitions */\n\n/**\n * Props data to use when rendering a single gift card component.\n * @typedef {Object} GiftCardTalonProps\n *\n * @property {function} removeGiftCardWithCode Function for removing a gift card associated with the code passed into this talon.\n */\n","import api from \"!../../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../../css-loader/dist/cjs.js??ref--6-oneOf-0-1!../../../../../../postcss-loader/dist/cjs.js!./giftCard.module.css\";\n\nvar options = {\"injectType\":\"styleTag\"};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import React, { Fragment } from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { useGiftCard } from '@magento/peregrine/lib/talons/CartPage/GiftCards/useGiftCard.js';\nimport Price from '@magento/venia-ui/lib/components/Price';\n\nimport { useStyle } from '../../../classify';\nimport defaultClasses from './giftCard.module.css';\nimport LinkButton from '../../LinkButton';\n\nconst GiftCard = props => {\n    const { code, currentBalance, isRemovingCard, removeGiftCard } = props;\n\n    const { removeGiftCardWithCode } = useGiftCard({\n        code,\n        removeGiftCard\n    });\n\n    const classes = useStyle(defaultClasses, props.classes);\n\n    return (\n        <Fragment>\n            <div className={classes.card_info}>\n                <span className={classes.code}>{code}</span>\n                <span className={classes.balance}>\n                    <FormattedMessage\n                        id={'giftCard.balance'}\n                        defaultMessage={'Balance: '}\n                    />\n                    <Price\n                        value={currentBalance.value}\n                        currencyCode={currentBalance.currency}\n                    />\n                </span>\n            </div>\n            <LinkButton\n                disabled={isRemovingCard}\n                onClick={removeGiftCardWithCode}\n                data-cy=\"GiftCards-GiftCard-removeButton\"\n            >\n                <FormattedMessage\n                    id={'giftCard.remove'}\n                    defaultMessage={'Remove'}\n                />\n            </LinkButton>\n        </Fragment>\n    );\n};\n\nexport default GiftCard;\n","import React, { useEffect } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { Form } from 'informed';\nimport { AlertCircle as AlertCircleIcon } from 'react-feather';\n\nimport { useGiftCards } from '@magento/peregrine/lib/talons/CartPage/GiftCards/useGiftCards';\nimport { Price, useToasts } from '@magento/peregrine';\n\nimport { useStyle } from '../../../classify';\nimport { isRequired } from '../../../util/formValidators';\nimport Button from '../../Button';\nimport Field from '../../Field';\nimport Icon from '../../Icon';\nimport LinkButton from '../../LinkButton';\nimport LoadingIndicator from '../../LoadingIndicator';\nimport TextInput from '../../TextInput';\nimport defaultClasses from './giftCards.module.css';\nimport GiftCard from './giftCard';\n\nconst errorIcon = (\n    <Icon\n        src={AlertCircleIcon}\n        attrs={{\n            width: 18\n        }}\n    />\n);\n\n/**\n * GiftCards is a child component of the CartPage component.\n * This component shows a form for applying gift cards along with a list of applied\n * Gift Cards in the shopping cart.\n *\n * @param {Object} props Component props\n * @param {Function} props.setIsCartUpdating Callback function to call when adding or removing a gift card\n * @param {Object} props.classes CSS className overrides.\n * See [giftCards.module.css]{@link https://github.com/magento/pwa-studio/blob/develop/packages/venia-ui/lib/components/CartPage/GiftCards/giftCards.module.css}\n * for a list of classes you can override.\n *\n * @returns {React.Element}\n *\n * @example <caption>Importing into your project</caption>\n * import GiftCards from '@magento/venia-ui/lib/components/CartPage/GiftCards';\n */\nconst GiftCards = props => {\n    const talonProps = useGiftCards({\n        setIsCartUpdating: props.setIsCartUpdating\n    });\n    const {\n        applyGiftCard,\n        checkBalanceData,\n        checkGiftCardBalance,\n        errorLoadingGiftCards,\n        errorRemovingCard,\n        giftCardsData,\n        isLoadingGiftCards,\n        isApplyingCard,\n        isCheckingBalance,\n        isRemovingCard,\n        removeGiftCard,\n        shouldDisplayCardBalance,\n        shouldDisplayCardError\n    } = talonProps;\n\n    const classes = useStyle(defaultClasses, props.classes);\n    const { formatMessage } = useIntl();\n    const [, { addToast }] = useToasts();\n    useEffect(() => {\n        if (errorRemovingCard) {\n            addToast({\n                type: 'error',\n                icon: errorIcon,\n                message: formatMessage({\n                    id: 'giftCards.errorRemoving',\n                    defaultMessage:\n                        'Unable to remove gift card. Please try again.'\n                }),\n                dismissable: true,\n                timeout: 7000\n            });\n        }\n    }, [addToast, errorRemovingCard, formatMessage]);\n\n    if (isLoadingGiftCards) {\n        return (\n            <LoadingIndicator>\n                <FormattedMessage\n                    id={'giftCards.loading'}\n                    defaultMessage={'Loading Gift Cards...'}\n                />\n            </LoadingIndicator>\n        );\n    }\n\n    const cardEntryErrorMessage = shouldDisplayCardError\n        ? formatMessage({\n              id: 'giftCards.errorInvalid',\n              defaultMessage: 'Invalid card. Please try again.'\n          })\n        : null;\n\n    let appliedGiftCards = null;\n    if (errorLoadingGiftCards) {\n        appliedGiftCards = (\n            <span className={classes.errorText}>\n                <FormattedMessage\n                    id={'giftCards.errorLoading'}\n                    defaultMessage={\n                        'There was an error loading applied gift cards. Please refresh and try again.'\n                    }\n                />\n            </span>\n        );\n    }\n    if (giftCardsData.length > 0) {\n        const cardList = giftCardsData.map(giftCardData => {\n            const { code, current_balance } = giftCardData;\n\n            return (\n                <GiftCard\n                    code={code}\n                    currentBalance={current_balance}\n                    isRemovingCard={isRemovingCard}\n                    key={code}\n                    removeGiftCard={removeGiftCard}\n                />\n            );\n        });\n\n        appliedGiftCards = (\n            <div className={classes.cards_container}>{cardList}</div>\n        );\n    }\n\n    const cardBalance = shouldDisplayCardBalance && (\n        <div className={classes.balance}>\n            <span className={classes.price}>\n                <FormattedMessage\n                    id={'giftCards.balance'}\n                    defaultMessage={'Balance: '}\n                />\n                <Price\n                    value={checkBalanceData.balance.value}\n                    currencyCode={checkBalanceData.balance.currency}\n                />\n            </span>\n        </div>\n    );\n\n    const containerClass = shouldDisplayCardError\n        ? classes.card_input_container_error\n        : classes.card_input_container;\n\n    const cardEntryContents = (\n        <div className={classes.card}>\n            <Field\n                classes={{\n                    root: classes.entry\n                }}\n                id={classes.card}\n                label={formatMessage({\n                    id: 'giftCards.cardNumber',\n                    defaultMessage: 'Gift Card Number'\n                })}\n            >\n                <div className={containerClass}>\n                    <TextInput\n                        id={classes.card}\n                        data-cy=\"GiftCards-card\"\n                        disabled={isApplyingCard || isCheckingBalance}\n                        field=\"card\"\n                        mask={value => value && value.trim()}\n                        maskOnBlur={true}\n                        message={cardEntryErrorMessage}\n                        placeholder={formatMessage({\n                            id: 'giftCards.cardEntry',\n                            defaultMessage: 'Enter card number'\n                        })}\n                        validate={isRequired}\n                    />\n                </div>\n                {cardBalance}\n            </Field>\n            <Field\n                classes={{\n                    label: classes.applyLabel\n                }}\n            >\n                <Button\n                    priority={'normal'}\n                    data-cy=\"GiftCards-apply\"\n                    disabled={isApplyingCard}\n                    onClick={applyGiftCard}\n                >\n                    <FormattedMessage\n                        id={'giftCards.apply'}\n                        defaultMessage={'Apply'}\n                    />\n                </Button>\n            </Field>\n            <LinkButton\n                className={classes.check_balance_button}\n                disabled={isCheckingBalance}\n                onClick={checkGiftCardBalance}\n            >\n                <FormattedMessage\n                    id={'giftCards.checkBalance'}\n                    defaultMessage={'Check balance'}\n                />\n            </LinkButton>\n        </div>\n    );\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.entryForm}>{cardEntryContents}</div>\n            {appliedGiftCards}\n        </div>\n    );\n};\n\nexport default props => {\n    return (\n        <Form data-cy=\"GiftCards-form\">\n            <GiftCards {...props} />\n        </Form>\n    );\n};\n","import api from \"!../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../css-loader/dist/cjs.js??ref--6-oneOf-0-1!../../../../../postcss-loader/dist/cjs.js!./linkButton.module.css\";\n\nvar options = {\"injectType\":\"styleTag\"};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import React from 'react';\nimport { oneOf, shape, string } from 'prop-types';\n\nimport { useStyle } from '../../classify';\nimport defaultClasses from './linkButton.module.css';\nimport Button from '../Button';\n\n/**\n * A component for link buttons.\n *\n * @typedef LinkButton\n * @kind functional component\n *\n * @param {props} props React component props\n *\n * @returns {React.Element} A React component that displays a single link button.\n */\nconst LinkButton = props => {\n    const { children, classes: propClasses, type, ...restProps } = props;\n    const classes = useStyle(defaultClasses, propClasses);\n\n    return (\n        <Button\n            priority={'normal'}\n            classes={{ root_normalPriority: classes.root }}\n            type={type}\n            {...restProps}\n        >\n            {children}\n        </Button>\n    );\n};\n\n/**\n * Props for {@link Button}\n *\n * @typedef props\n *\n * @property {Object} classes An object containing the class names for the\n * Button component.\n * @property {string} classes.root classes for root container\n * @property {string} type the type of the Button\n */\nLinkButton.propTypes = {\n    classes: shape({\n        root: string\n    }),\n    type: oneOf(['button', 'reset', 'submit']).isRequired\n};\n\nLinkButton.defaultProps = {\n    type: 'button'\n};\n\nexport default LinkButton;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".giftCard-card_info-TFA {\\n}\\n\\n.giftCard-balance-b7r {\\n}\\n\\n.giftCard-code-ZJO {\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@magento/venia-ui/lib/components/CartPage/GiftCards/giftCard.module.css\"],\"names\":[],\"mappings\":\"AAAA;AAGA;;AAEA;AAEA;;AAEA;AACA\",\"sourcesContent\":[\".card_info {\\n    composes: grid from global;\\n    composes: gap-y-2xs from global;\\n}\\n\\n.balance {\\n    composes: text-sm from global;\\n}\\n\\n.code {\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"card_info\": \"giftCard-card_info-TFA grid gap-y-2xs\",\n\t\"balance\": \"giftCard-balance-b7r text-sm\",\n\t\"code\": \"giftCard-code-ZJO\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_ICSS_IMPORT_0___ from \"-!../../../../../../css-loader/dist/cjs.js??ref--6-oneOf-0-1!../../../../../../postcss-loader/dist/cjs.js!../../LinkButton/linkButton.module.css\";\nimport ___CSS_LOADER_ICSS_IMPORT_1___ from \"-!../../../../../../css-loader/dist/cjs.js??ref--6-oneOf-0-1!../../../../../../postcss-loader/dist/cjs.js!../../Field/field.module.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_ICSS_IMPORT_0___, \"\", true);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_ICSS_IMPORT_1___, \"\", true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".giftCards-root-Hgt {\\n}\\n\\n.giftCards-errorText-5Vu {\\n}\\n\\n.giftCards-balance-1JD {\\n    grid-template-columns: max-content 1fr;\\n}\\n\\n.giftCards-card-F61 {\\n    grid-template-areas:\\n        'card_entry'\\n        'check_balance_button'\\n        'apply_button';\\n}\\n\\n@media (min-width: 960px) {\\n    .giftCards-card-F61 {\\n        grid-template-areas:\\n            'card_entry apply_button'\\n            'check_balance_button check_balance_button';\\n    }\\n}\\n\\n.giftCards-card_input_container-ogL {\\n}\\n\\n/* TODO @TW: cannot compose */\\n.giftCards-card_input_container_error-t6H input {\\n    /* composes: border-error from global; */\\n    border-color: rgb(var(--venia-global-color-red-400));\\n}\\n\\n/* TODO @TW: cannot compose */\\n.giftCards-card_input_container_error-t6H input:focus {\\n    /* composes: border-gray-600 from global; */\\n    border-color: rgb(var(--venia-global-color-gray-600));\\n}\\n\\n/* TODO @TW: cannot compose */\\n.giftCards-card_input_container_error-t6H p {\\n    /* composes: text-error from global; */\\n    color: rgb(var(--venia-global-color-error));\\n    /* composes: font-semibold from global; */\\n    font-weight: 600;\\n}\\n\\n.giftCards-cards_container-ogd {\\n    grid-template-columns: max-content auto;\\n}\\n\\n.giftCards-check_balance_button-JRl {\\n    grid-area: check_balance_button;\\n}\\n\\n.giftCards-entry-e3g {\\n    grid-area: card_entry;\\n}\\n\\n.giftCards-price-k2T {\\n}\\n\\n.giftCards-entryForm-XoW {\\n}\\n\\n.giftCards-applyLabel-sGo {\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@magento/venia-ui/lib/components/CartPage/GiftCards/giftCards.module.css\"],\"names\":[],\"mappings\":\"AAAA;AAGA;;AAEA;AAGA;;AAEA;IAMI,sCAAsC;AAC1C;;AAEA;IAKI;;;sBAGkB;AAGtB;;AAEA;IACI;QACI;;uDAE+C;IACnD;AACJ;;AAEA;AACA;;AAEA,6BAA6B;AAC7B;IACI,wCAAwC;IACxC,oDAAoD;AACxD;;AAEA,6BAA6B;AAC7B;IACI,2CAA2C;IAC3C,qDAAqD;AACzD;;AAEA,6BAA6B;AAC7B;IACI,sCAAsC;IACtC,2CAA2C;IAC3C,yCAAyC;IACzC,gBAAgB;AACpB;;AAEA;IAKI,uCAAuC;AAC3C;;AAEA;IAII,+BAA+B;AAGnC;;AAEA;IACI,qBAAqB;AACzB;;AAEA;AACA;;AAEA;AACA;;AAEA;AAMA\",\"sourcesContent\":[\".root {\\n    composes: grid from global;\\n    composes: gap-md from global;\\n}\\n\\n.errorText {\\n    composes: leading-normal from global;\\n    composes: text-error from global;\\n}\\n\\n.balance {\\n    composes: grid from global;\\n    composes: italic from global;\\n    composes: items-start from global;\\n    composes: pt-1.5 from global;\\n    composes: text-sm from global;\\n    grid-template-columns: max-content 1fr;\\n}\\n\\n.card {\\n    composes: gap-sm from global;\\n    composes: grid from global;\\n    composes: grid-cols-1 from global;\\n    composes: items-start from global;\\n    grid-template-areas:\\n        'card_entry'\\n        'check_balance_button'\\n        'apply_button';\\n\\n    composes: lg_grid-cols-autoLast from global;\\n}\\n\\n@media (min-width: 960px) {\\n    .card {\\n        grid-template-areas:\\n            'card_entry apply_button'\\n            'check_balance_button check_balance_button';\\n    }\\n}\\n\\n.card_input_container {\\n}\\n\\n/* TODO @TW: cannot compose */\\n.card_input_container_error input {\\n    /* composes: border-error from global; */\\n    border-color: rgb(var(--venia-global-color-red-400));\\n}\\n\\n/* TODO @TW: cannot compose */\\n.card_input_container_error input:focus {\\n    /* composes: border-gray-600 from global; */\\n    border-color: rgb(var(--venia-global-color-gray-600));\\n}\\n\\n/* TODO @TW: cannot compose */\\n.card_input_container_error p {\\n    /* composes: text-error from global; */\\n    color: rgb(var(--venia-global-color-error));\\n    /* composes: font-semibold from global; */\\n    font-weight: 600;\\n}\\n\\n.cards_container {\\n    composes: gap-sm from global;\\n    composes: grid from global;\\n    composes: items-baseline from global;\\n    composes: justify-start from global;\\n    grid-template-columns: max-content auto;\\n}\\n\\n.check_balance_button {\\n    composes: root from '../../LinkButton/linkButton.module.css';\\n\\n    composes: justify-self-center from global;\\n    grid-area: check_balance_button;\\n\\n    composes: lg_justify-self-start from global;\\n}\\n\\n.entry {\\n    grid-area: card_entry;\\n}\\n\\n.price {\\n}\\n\\n.entryForm {\\n}\\n\\n.applyLabel {\\n    composes: label from '../../Field/field.module.css';\\n\\n    composes: hidden from global;\\n\\n    composes: lg_block from global;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"root\": \"giftCards-root-Hgt grid gap-md\",\n\t\"errorText\": \"giftCards-errorText-5Vu leading-normal text-error\",\n\t\"balance\": \"giftCards-balance-1JD grid italic items-start pt-1.5 text-sm\",\n\t\"card\": \"giftCards-card-F61 gap-sm grid grid-cols-1 items-start lg_grid-cols-autoLast\",\n\t\"card_input_container\": \"giftCards-card_input_container-ogL\",\n\t\"card_input_container_error\": \"giftCards-card_input_container_error-t6H\",\n\t\"cards_container\": \"giftCards-cards_container-ogd gap-sm grid items-baseline justify-start\",\n\t\"check_balance_button\": \"giftCards-check_balance_button-JRl \" + ___CSS_LOADER_ICSS_IMPORT_0___.locals[\"root\"] + \" justify-self-center lg_justify-self-start\",\n\t\"entry\": \"giftCards-entry-e3g\",\n\t\"price\": \"giftCards-price-k2T\",\n\t\"entryForm\": \"giftCards-entryForm-XoW\",\n\t\"applyLabel\": \"giftCards-applyLabel-sGo \" + ___CSS_LOADER_ICSS_IMPORT_1___.locals[\"label\"] + \" hidden lg_block\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_ICSS_IMPORT_0___ from \"-!../../../../../css-loader/dist/cjs.js??ref--6-oneOf-0-1!../../../../../postcss-loader/dist/cjs.js!../clickable.module.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_ICSS_IMPORT_0___, \"\", true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".linkButton-root-HUs {\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@magento/venia-ui/lib/components/LinkButton/linkButton.module.css\"],\"names\":[],\"mappings\":\"AAAA;AAWA\",\"sourcesContent\":[\".root {\\n    composes: root from '../clickable.module.css';\\n\\n    composes: font-semibold from global;\\n    composes: leading-tight from global;\\n    composes: max-w-full from global;\\n    composes: text-colorDefault from global;\\n    composes: text-brand-dark from global;\\n    composes: underline from global;\\n\\n    composes: hover_text-colorDefault from global;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"root\": \"linkButton-root-HUs \" + ___CSS_LOADER_ICSS_IMPORT_0___.locals[\"root\"] + \" font-semibold leading-tight max-w-full text-colorDefault text-brand-dark underline hover_text-colorDefault\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".clickable-root-sDL {\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@magento/venia-ui/lib/components/clickable.module.css\"],\"names\":[],\"mappings\":\"AAAA;AAQA\",\"sourcesContent\":[\".root {\\n    composes: cursor-pointer from global;\\n    composes: inline-flex from global;\\n    composes: items-center from global;\\n    composes: justify-center from global;\\n    composes: leading-none from global;\\n    composes: pointer-events-auto from global;\\n    composes: text-center from global;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"root\": \"clickable-root-sDL cursor-pointer inline-flex items-center justify-center leading-none pointer-events-auto text-center\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"sourceRoot":""}